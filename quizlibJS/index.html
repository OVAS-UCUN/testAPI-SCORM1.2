<!-- Try this example at https://alpsquid.github.io/quizlib -->

<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <title>Quizlib Simple-Quiz</title>
    <link rel="stylesheet" type="text/css" href="./css/quizlib.css" media="screen">
    <link rel="stylesheet" type="text/css" href="./css/stylesheet.css" media="screen">

    <!-- API SCORM -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <script type="text/javascript" src="../js/SCORM_API_wrapper.js"></script>
    <script type="text/javascript" src="../js/SCOFunctions.js"></script>
</head>

<body class="exe-scorm">
    <script type="text/javascript">
        document.body.className += " js";
        jQuery(function() {
            loadPage()
        })
    </script>
    <!-- Quiz Results -->
    <div id="quiz-result" class="card">
        Has puntuado <span id="quiz-percent"></span>% - <span id="quiz-score"></span>/<span id="quiz-max-score"></span><br/>
    </div>

    <!-- Quiz Container -->
    <div id="quiz">
        <h2>Quiz</h2>
        <h3 id="userName"></h3>
        <!-- Question 1 -->
        <div class="card quizlib-question">
            <div class="quizlib-question-title">1. Cuantos años tiene Diego?</div>
            <div class="quizlib-question-answers">
                <input type="text" name="q1">
            </div>
        </div>
        <!-- Question 2 -->
        <div class="card quizlib-question">
            <div class="quizlib-question-title">2. El padre de tu enemigo...</div>
            <div class="quizlib-question-answers">
                <ul>
                    <li><label><input type="radio" name="q2" value="a"> PHP</label></li>
                    <li><label><input type="radio" name="q2" value="b"> Depende de lo que vayas a desarrollar</label></li>
                    <li><label><input type="radio" name="q2" value="c"> Javascript</label></li>
                    <li><label><input type="radio" name="q2" value="d"> Python</label></li>
                </ul>
            </div>
        </div>
        <!-- Question 3 -->
        <div class="card quizlib-question">
            <div class="quizlib-question-title">3. ¿Qué factores contribuirán al fin de la humanidad tal y como la conocemos?</div>
            <div class="quizlib-question-answers">
                <ul>
                    <li><label><input type="checkbox" name="q3" value="a"> Calentamiento global</label></li>
                    <li><label><input type="checkbox" name="q3" value="b"> Descontrol diplomatico para una guerra mundial</label></li>
                    <li><label><input type="checkbox" name="q3" value="c"> Los gatos</label></li>
                    <li><label><input type="checkbox" name="q3" value="d"> Desbordamiento de avances en la inteligencia artificial</label></li>
                </ul>
            </div>
        </div>
        <!-- Answer Button -->
        <button type="button" onclick="showResults();">Comprobar las respuestas</button>
    </div>

    <!-- Quizlib -->
    <script type="text/javascript" src="./js/quizlib.js"></script>
    <script type="text/javascript" src="./js/simple-quiz.js"></script>

    <!-- Free Style -->
    <script>
        window.addEventListener("load", function(event) {
            console.log("Todos los recursos del LMS terminaron de cargar!");

            (document.getElementById("region-main")) ? console.log("Encuentra region principal de Moodle"): console.log("No se encuentra region principal de Moodle");
            (document.getElementById("scormpage")) ? console.log("Encuentra SCORM PAGE"): console.log("No se encuentra SCORM PAGE");
            (document.getElementById("tocbox")) ? console.log("Encuentra SCORM tocbox"): console.log("No se encuentra SCORM tocbox");
            (document.getElementById("toctree")) ? console.log("Encuentra SCORM toctree"): console.log("No se encuentra SCORM toctree");



            //var iframeSCORM = window.document.querySelectorAll("iframe#scorm_object")[0];
            var iframeSCORM = window.document.getElementById("scorm_content").children[0];
            if (iframeSCORM) {
                console.log("iFrame del SCORM encontrado");
                var iframeSCORM_Content = iframeSCORM.contentWindow;
                var iframeSCORM_Document = iframeSCORM_Content.document;
                // Busca el campo para llenar con el nombre del usuario
                var userFieldSCORM = iframeSCORM_Document.getElementById('userName');
                if (userFieldSCORM) {
                    console.log("El campo para llenar con el nombre del usuario se ha encontrado");
                    userFieldSCORM.innerHTML = iframeSCORM_Content.scorm.get("cmi.core.student_name");
                }
            } else {
                console.log("El iFrame del SCORM no se ha encontrado");
            }
        });
    </script>
</body>

</html>